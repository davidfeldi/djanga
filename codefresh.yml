version: '1.0'
#adding commentss
steps:
  clone-prj:
    type: git-clone
    repo: https://github.com/nCodefresh/docker-spring-boot.git
  
  unit-test:
    image: python:2-alpine
    commands: 
      - exit 0
    environment:
      - JIM=JIM
      - PORT=9000

  # Not implemented yet
  #integration-tests:
  #  type: composition
  #  image: alpine
  #  working-directory: ${{clone-jim}}
  #  composition-file: integ-test-composition.yml
  #  commands:
  #    - tests/exec.sh

  build-djanga:
    type: build
    description: It builds the Djanga Service
    dockerfile: Dockerfile
    image-name: davidfeldi/djanga-regular
    tag: nicetag
    #build-arguments:
    #  - FOO=BAR
  
  clone-step-1:
    type: git-clone
    #hoyova
    repo: https://friki@bitbucket.org/david_feldstein/djanga.git
    revision: master
    credentials:
      username: ${{bitbucket_user}}
      password: ${{bitbucket_password}}
  
  build-djanga-1:
    type: build
    description: It builds the Djanga Service
    dockerfile: Dockerfile
    image-name: davidfeldi/djanga-bitbucket
    tag: nicetag
    working-directory: ${{clone-step-1}}
    #build-arguments:
    #  - FOO=BAR

  #push-dockerhub:
  #  type: push
  #  candidate: ${{build-djanga}}
  #  tag: awesomeness
