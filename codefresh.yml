version: '1.0'

steps:
  
  unit-test:
    image: tutum/curl
    commands: 
      - exit 0
    environment:
      - JIM=JIM
      - PORT=9000
    fail-fast: false
      
  build-djanga:
    type: build
    description: It builds the Djanga Service
    dockerfile: Dockerfile
    image-name: noamt/djanga
    tag: jimbob
  
  test-comp:
    type: composition
    description: It composes the Djanga Service
    composition: dja
    composition-candidates:
      web:
        image: 'noamt/djanga:master'
        command: echo \"Waiting for DB\"
    composition-variables:
      - key=value

  #push-dockerhub:
   # type: push
    #candidate: ${{build-djanga}}
    #tag: awesomeness
    #credentials:
     # username: ${{username}}
      #password: ${{password}}
